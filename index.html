<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Presente Interativo ðŸ’–</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}
html,body{
  width:100%;
  height:100%;
  overflow:hidden;
  background:black;
  font-family:Segoe UI,sans-serif;
  color:white;
}

#game{
  position:relative;
  width:100%;
  height:100%;
}

/* CONTADOR */
#contador{
  position:fixed;
  top:20px;
  right:20px;
  padding:16px 26px;
  background:rgba(255,255,255,0.18);
  backdrop-filter:blur(8px);
  border-radius:25px;
  font-size:22px;
  z-index:10;
}

/* BONECO */
#boneco{
  position:absolute;
  width:130px;
  height:130px;
  background:url('boneco_parado.png') center/contain no-repeat;
}

/* MOEDA */
.moeda{
  position:absolute;
  width:90px;
  height:90px;
  background:url('coin.png') center/contain no-repeat;
}

/* BOLO */
#bolo{
  position:absolute;
  width:240px;
  height:240px;
  background:url('cake.png') center/contain no-repeat;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  display:none;
}

/* BOTÃ•ES */
.btn{
  position:absolute;
  width:110px;
  height:110px;
  background:rgba(255,255,255,.25);
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:46px;
  user-select:none;
}
#up{bottom:260px;left:160px;}
#down{bottom:40px;left:160px;}
#left{bottom:150px;left:20px;}
#right{bottom:150px;left:300px;}

/* CORAÃ‡Ã•ES */
.heart{
  position:absolute;
  width:24px;
  height:24px;
  background:red;
  clip-path: polygon(50% 0%,61% 12%,75% 12%,88% 25%,88% 38%,75% 50%,50% 75%,25% 50%,12% 38%,12% 25%,25% 12%,39% 12%);
  animation:subir 3s forwards;
}
@keyframes subir{
  from{opacity:1;transform:translateY(0);}
  to{opacity:0;transform:translateY(-220px);}
}

/* CARTA */
#carta{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:420px;
  max-width:92%;
  padding:30px;
  background:rgba(255,255,255,.1);
  backdrop-filter:blur(10px);
  border-radius:30px;
  text-align:center;
  display:none;
}

#carta img{
  width:100%;
  border-radius:15px;
  margin:18px 0;
}

.hint{opacity:.7;font-size:14px;}
</style>
</head>

<body>

<div id="game">
  <div id="contador">Moedas: 0 / 17</div>
  <div id="boneco"></div>
  <div id="bolo"></div>
</div>

<div id="carta">
  <h2>Para vocÃª ðŸ’–</h2>
  <img id="imagem" src="imagem1.png">
  <p id="texto">Toque com calma.</p>
  <div class="hint">toque para continuar âœ¨</div>
</div>

<div id="up" class="btn">â–²</div>
<div id="down" class="btn">â–¼</div>
<div id="left" class="btn">â—€</div>
<div id="right" class="btn">â–¶</div>

<audio id="musicaInicial" src="musica_inicial.mp3" loop></audio>
<audio id="musicaFinal" src="musica.mp3" loop></audio>

<script>
const boneco=document.getElementById('boneco');
const bolo=document.getElementById('bolo');
const game=document.getElementById('game');
const carta=document.getElementById('carta');
const texto=document.getElementById('texto');
const imagem=document.getElementById('imagem');
const contador=document.getElementById('contador');

const musicaInicial=document.getElementById('musicaInicial');
const musicaFinal=document.getElementById('musicaFinal');

let x=innerWidth/2-65;
let y=innerHeight/2-65;
const vel=6;

let dir={up:false,down:false,left:false,right:false};

['up','down','left','right'].forEach(d=>{
  document.getElementById(d).addEventListener('touchstart',()=>dir[d]=true);
  document.getElementById(d).addEventListener('touchend',()=>dir[d]=false);
});

let moedas=0;
let moeda=null;

function criarMoeda(){
  moeda=document.createElement('div');
  moeda.className='moeda';
  moeda.style.left=Math.random()*(innerWidth-90)+'px';
  moeda.style.top=Math.random()*(innerHeight-90)+'px';
  game.appendChild(moeda);
}
criarMoeda();

function coracao(){
  const h=document.createElement('div');
  h.className='heart';
  h.style.left=(x+60)+'px';
  h.style.top=(y+60)+'px';
  game.appendChild(h);
  setTimeout(()=>h.remove(),3000);
}

let iniciado=false;
game.addEventListener('click',()=>{
  if(!iniciado){
    musicaInicial.play();
    iniciado=true;
  }
},{once:true});

function loop(){
  if(dir.up)y-=vel;
  if(dir.down)y+=vel;
  if(dir.left)x-=vel;
  if(dir.right)x+=vel;

  x=Math.max(0,Math.min(innerWidth-130,x));
  y=Math.max(0,Math.min(innerHeight-130,y));

  boneco.style.left=x+'px';
  boneco.style.top=y+'px';

  if(moeda){
    const b=boneco.getBoundingClientRect();
    const m=moeda.getBoundingClientRect();
    if(!(b.right<m.left||b.left>m.right||b.bottom<m.top||b.top>m.bottom)){
      moeda.remove();
      moeda=null;
      moedas++;
      contador.innerText=`Moedas: ${moedas} / 17`;
      coracao();
      if(moedas<17) setTimeout(criarMoeda,300);
      else bolo.style.display='block';
    }
  }

  if(bolo.style.display==='block'){
    const b=boneco.getBoundingClientRect();
    const bo=bolo.getBoundingClientRect();
    if(!(b.right<bo.left||b.left>bo.right||b.bottom<bo.top||b.top>bo.bottom)){
      musicaInicial.pause();
      musicaFinal.play();
      game.style.display='none';
      carta.style.display='block';
    }
  }

  requestAnimationFrame(loop);
}
loop();

const historia=[
  "Felicidades pudiste llegar aqui.",
  "Advina de quien es este cumpleaÃ±os en este diaa.",
  "TUU felicidades por un aÃ±o mas de vida.",
  "Por ser una persona tan maravillosa.",
  "Por acompaÃ±ar en este aÃ±o y los anteriores.",
  "Que la passes fantastico con lss personas qie te quieren.",
  "Que comas feliz tu bolitoâ€¦",
  "Que aproveches este dia tuyo.",
  "Que todo lo mejor te pase en la vida.",
  "te aprecio muchoooooo",
  "Que tangas un aÃ±o solo de felicidad.",
  "Y nada de tristesa >:v.",
  "si nos OJITOOO.",
  "te va llover huevos y harina.",
  "tu seras tu propria torta.",
  "pero este es UNO de los regalitos.",
  "no faltes jueves <3"
];

let passo=0;
carta.addEventListener('click',()=>{
  if(passo<historia.length){
    texto.innerText=historia[passo];
    imagem.src='imagem'+(passo+1)+'.png';
    passo++;
  }
});
</script>

</body>
</html>
